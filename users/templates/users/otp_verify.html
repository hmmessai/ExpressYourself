{% extends 'base.html' %}
{% block title %}
Verify Phone
{% endblock %}
{% block content%}
<div class="container">
    <form method="post" action="{% url 'verify_phone' %}">
        {% csrf_token %}
        <div class="form-control">
            <label for="otp">Enter the code sent to {{phone_number}}</label>
            <input class="form-group" type="text" name="code">
        </div>
        <button type="submit">Verify</button>
    </form>
</div>
{% endblock %}
{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    var form = document.getElementById('myForm');
    form.addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent the default form submission

        // Create a FormData object
        var formData = new FormData(form);
        var phone_number = "{{ phone_number }}";
        var user_id = '{{ id }}'

        // Add your additional data
        formData.append('phone_number', phone_number);
        formData.append('user_id', user_id);

        for (var pair of formData.entries()) {
                    console.log(pair[0] + ': ' + pair[1]);
                }

        // Use fetch or XMLHttpRequest to submit the form data
        fetch(form.action, {
            method: form.method,
            body: formData,
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        }).then(function (response) {
            // Handle the response here
            console.log(response);
        }).catch(function (error) {
            // Handle the error here
            console.error('Error:', error);
        });
    });
});
</script>

{% endblock %}